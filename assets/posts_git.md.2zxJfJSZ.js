import{_ as s,o as a,c as o,R as n}from"./chunks/framework.07BXFssY.js";const h=JSON.parse('{"title":"git","description":"","frontmatter":{},"headers":[],"relativePath":"posts/git.md","filePath":"posts/git.md","lastUpdated":1701030096000}'),e={name:"posts/git.md"},l=n(`<h1 id="git" tabindex="-1">git <a class="header-anchor" href="#git" aria-label="Permalink to &quot;git&quot;">​</a></h1><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">git</span><span style="color:#E6DB74;"> config</span><span style="color:#AE81FF;"> --global</span><span style="color:#E6DB74;"> user.name</span><span style="color:#E6DB74;"> &quot;Eray Ates&quot;</span></span>
<span class="line"><span style="color:#A6E22E;">git</span><span style="color:#E6DB74;"> config</span><span style="color:#AE81FF;"> --global</span><span style="color:#E6DB74;"> user.email</span><span style="color:#E6DB74;"> &quot;eates23@gmail.com&quot;</span></span></code></pre></div><h2 id="exclude-files" tabindex="-1">Exclude files <a class="header-anchor" href="#exclude-files" aria-label="Permalink to &quot;Exclude files&quot;">​</a></h2><blockquote><p><a href="https://stackoverflow.com/questions/7335420/global-git-ignore" target="_blank" rel="noreferrer">https://stackoverflow.com/questions/7335420/global-git-ignore</a></p></blockquote><p><code>.gitignore</code> file is good for projects but sometimes adding our own development tools adding unwanted files in projects.</p><p>To prevent that add a global <code>.gitignore</code> file and add to <code>.gitconfig</code> file.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">git</span><span style="color:#E6DB74;"> config</span><span style="color:#AE81FF;"> --global</span><span style="color:#E6DB74;"> core.excludesFile</span><span style="color:#E6DB74;"> &#39;~/.gitignore&#39;</span></span></code></pre></div><p>And verify it</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">git</span><span style="color:#E6DB74;"> config</span><span style="color:#AE81FF;"> --global</span><span style="color:#E6DB74;"> core.excludesFile</span></span></code></pre></div><h2 id="user-change" tabindex="-1">User change <a class="header-anchor" href="#user-change" aria-label="Permalink to &quot;User change&quot;">​</a></h2><p>Working for different companies and different projects, sometimes we need to change our git user.</p><p>To do that we can add <code>includeIf</code> to our <code>.gitconfig</code> file.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki monokai vp-code"><code><span class="line"><span>[includeIf &quot;gitdir:~/personal/*/&quot;]</span></span>
<span class="line"><span>    path = ~/.git/personal</span></span></code></pre></div><p>And create a file <code>~/.git/personal</code> and add your user info</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki monokai vp-code"><code><span class="line"><span>[user]</span></span>
<span class="line"><span>    name = Eray Ates</span></span>
<span class="line"><span>    email = eates23@gmail.com</span></span></code></pre></div><h2 id="gpg-key" tabindex="-1">GPG Key <a class="header-anchor" href="#gpg-key" aria-label="Permalink to &quot;GPG Key&quot;">​</a></h2><p>Check this links:</p><p><a href="https://docs.github.com/en/authentication/managing-commit-signature-verification/generating-a-new-gpg-key?platform=linux" target="_blank" rel="noreferrer">https://docs.github.com/en/authentication/managing-commit-signature-verification/generating-a-new-gpg-key?platform=linux</a><br><a href="https://docs.gitlab.com/ee/user/project/repository/signed_commits/gpg.html" target="_blank" rel="noreferrer">https://docs.gitlab.com/ee/user/project/repository/signed_commits/gpg.html</a></p><p>Install gpg(2) with your package manager.</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">gpg</span><span style="color:#AE81FF;"> --full-generate-key</span></span></code></pre></div><p>I chose the DSA only for signing</p><p>And name is -&gt; &quot;Eray Ates&quot;, email is -&gt; &quot;<a href="mailto:eates23@gmail.com" target="_blank" rel="noreferrer">eates23@gmail.com</a>&quot;, after add a password.</p><p>List your keys</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">gpg</span><span style="color:#AE81FF;"> --list-secret-keys</span><span style="color:#AE81FF;"> --keyid-format=long</span></span></code></pre></div><p>You will get something like this:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">[keyboxd]</span></span>
<span class="line"><span style="color:#A6E22E;">---------</span></span>
<span class="line"><span style="color:#A6E22E;">sec</span><span style="color:#E6DB74;">   dsa2048/8C2C8572CE10E92D</span><span style="color:#AE81FF;"> 2023</span><span style="color:#E6DB74;">-11-25</span><span style="color:#F8F8F2;"> [SC]</span></span>
<span class="line"><span style="color:#A6E22E;">      GG4ZPFCTU8CREWZPBHIY9MWKIBINDPTOBGHED9NP</span></span>
<span class="line"><span style="color:#A6E22E;">uid</span><span style="color:#F8F8F2;">       [    </span><span style="color:#E6DB74;">son</span><span style="color:#E6DB74;"> derece</span><span style="color:#E6DB74;">    ]</span><span style="color:#E6DB74;"> Eray</span><span style="color:#E6DB74;"> Ates</span><span style="color:#F92672;"> &lt;</span><span style="color:#E6DB74;">eates23@gmail.co</span><span style="color:#F8F8F2;">m</span><span style="color:#F92672;">&gt;</span></span></code></pre></div><p>Now use <code>8C2C8572CE10E92D</code> your GPG key ID and run this command</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">gpg</span><span style="color:#AE81FF;"> --armor</span><span style="color:#AE81FF;"> --export</span><span style="color:#AE81FF;"> 8</span><span style="color:#E6DB74;">C2C8572CE10E92D</span></span></code></pre></div><p>Copy the output and add to GitHub/GitLab GPG key settings.</p><p>Use this GPG key-id for git signing</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">git</span><span style="color:#E6DB74;"> config</span><span style="color:#AE81FF;"> --global</span><span style="color:#E6DB74;"> user.signingkey</span><span style="color:#AE81FF;"> 8</span><span style="color:#E6DB74;">C2C8572CE10E92D</span></span></code></pre></div><p>And always enable <code>-S</code> flag for git commit</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">git</span><span style="color:#E6DB74;"> config</span><span style="color:#AE81FF;"> --global</span><span style="color:#E6DB74;"> commit.gpgsign</span><span style="color:#AE81FF;"> true</span></span></code></pre></div><h2 id="gpg-tty" tabindex="-1">GPG TTY <a class="header-anchor" href="#gpg-tty" aria-label="Permalink to &quot;GPG TTY&quot;">​</a></h2><p>If you see this error when you try to commit</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">error:</span><span style="color:#E6DB74;"> gpg</span><span style="color:#E6DB74;"> failed</span><span style="color:#E6DB74;"> to</span><span style="color:#E6DB74;"> sign</span><span style="color:#E6DB74;"> the</span><span style="color:#E6DB74;"> data</span></span>
<span class="line"><span style="color:#A6E22E;">fatal:</span><span style="color:#E6DB74;"> failed</span><span style="color:#E6DB74;"> to</span><span style="color:#E6DB74;"> write</span><span style="color:#E6DB74;"> commit</span><span style="color:#E6DB74;"> object</span></span></code></pre></div><p>Try debug it with this command</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">GIT_TRACE</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">1</span><span style="color:#A6E22E;"> git</span><span style="color:#E6DB74;"> commit</span><span style="color:#AE81FF;"> -s</span></span></code></pre></div><p>You need to add this to your <code>~/.gnupg/gpg-agent.conf</code> file</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#66D9EF;">echo</span><span style="color:#E6DB74;"> &quot;pinentry-program $(</span><span style="color:#66D9EF;">which</span><span style="color:#E6DB74;"> pinentry-curses)&quot;</span><span style="color:#F92672;"> &gt;</span><span style="color:#E6DB74;"> ~/.gnupg/gpg-agent.conf</span></span></code></pre></div><p>And you should restart gpg-agent</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">gpgconf</span><span style="color:#AE81FF;"> --kill</span><span style="color:#E6DB74;"> gpg-agent</span></span></code></pre></div><p>Test it and you should see a pinentry window based on your pinentry-program</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#66D9EF;">echo</span><span style="color:#E6DB74;"> &quot;test&quot;</span><span style="color:#F92672;"> |</span><span style="color:#A6E22E;"> gpg</span><span style="color:#AE81FF;"> --clearsign</span></span></code></pre></div>`,44),p=[l];function t(c,i,r,d,g,y){return a(),o("div",null,p)}const E=s(e,[["render",t]]);export{h as __pageData,E as default};
