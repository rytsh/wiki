import{_ as s,o as a,c as n,ag as t}from"./chunks/framework.BcBuEkoe.js";const h=JSON.parse('{"title":"Pre-requests","description":"Kubernetes kernel and kernel modules.","frontmatter":{"head":[["meta",{"name":"description","content":"Kubernetes kernel and kernel modules."}],["meta",{"name":"keywords","content":"kubernetes kernel"}]]},"headers":[],"relativePath":"development/kubernetes/cluster/pre-requests.md","filePath":"development/kubernetes/cluster/pre-requests.md","lastUpdated":1743799263000}'),r={name:"development/kubernetes/cluster/pre-requests.md"};function o(l,e,p,c,d,i){return a(),n("div",null,e[0]||(e[0]=[t(`<h1 id="pre-requests" tabindex="-1">Pre-requests <a class="header-anchor" href="#pre-requests" aria-label="Permalink to &quot;Pre-requests&quot;">​</a></h1><h2 id="enable-port-forwarding" tabindex="-1">Enable port forwarding <a class="header-anchor" href="#enable-port-forwarding" aria-label="Permalink to &quot;Enable port forwarding&quot;">​</a></h2><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme vp-code" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">net.ipv4.ip_forward = 1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;"> sudo</span><span style="color:#C3E88D;"> tee</span><span style="color:#C3E88D;"> -a</span><span style="color:#C3E88D;"> /etc/sysctl.conf</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> sysctl</span><span style="color:#C3E88D;"> -p</span></span></code></pre></div><h2 id="change-kernel" tabindex="-1">Change Kernel <a class="header-anchor" href="#change-kernel" aria-label="Permalink to &quot;Change Kernel&quot;">​</a></h2><p><code>tproxy</code> module is used for transparent proxying. In WSL2 not exist yet this module but use a patched kernel to use it.</p><p>Get existing kernel from <a href="https://github.com/Locietta/xanmod-kernel-WSL2" target="_blank" rel="noreferrer">https://github.com/Locietta/xanmod-kernel-WSL2</a></p><p>Edit <code>/mnt/c/Users/&lt;username&gt;/.wslconfig</code></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme vp-code" tabindex="0"><code><span class="line"><span>[wsl2]</span></span>
<span class="line"><span>kernel = C:\\\\tools\\\\kernel\\\\bzImage-x64v3</span></span>
<span class="line"><span>kernelCommandLine = cgroup_no_v1=all</span></span></code></pre></div><p><code>wsl.exe --shutdown</code> and restart WSL2. <code>uname -a</code> to show kernel version.</p>`,9)]))}const m=s(r,[["render",o]]);export{h as __pageData,m as default};
